name: Update README on Code Change

on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main

jobs:
  update-readme:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    # Python 환경 설정
    - name: Set up Python
      uses: actions/setup-python@v2
      with:
        python-version: '3.x'  # 원하는 Python 버전 (3.x 추천)

    # README.md 파일을 자동으로 생성하는 Python 스크립트 실행
    - name: Generate README.md
      run: |
        python generate_readme.py  # Python 스크립트를 사용하여 README.md 생성

    # 변경된 README.md 파일을 커밋하고 푸시
    - name: Commit updated README.md
      run: |
        git config --global user.name "Your GitHub Username"
        git config --global user.email "your-email@example.com"
        git add README.md
        git commit -m "Update README.md automatically"
        git push origin main
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}  # GitHub token 사용
